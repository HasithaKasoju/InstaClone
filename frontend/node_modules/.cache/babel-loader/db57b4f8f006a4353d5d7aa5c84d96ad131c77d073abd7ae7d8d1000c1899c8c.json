{"ast":null,"code":"import React,{useEffect,useState}from'react';import profile from'../img/profile.jpg';import\"../css/Profile.css\";import{useNavigate}from'react-router-dom';import Postdetails from'./Postdetails';import{useParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfile(){const[data,setData]=useState([]);const{userid}=useParams();const[user,setUser]=useState(\"\");const[posts,setPosts]=useState([]);const[following,setFollowing]=useState(false);// State to track if user is following\nconst navigate=useNavigate();const notifyB=message=>alert(message);const followUser=userid=>{fetch(\"/follow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userid})}).then(res=>res.json()).then(data=>{console.log(data);setFollowing(true);// Update state to indicate following\nlocalStorage.setItem(\"following\",true);// Update local storage\n}).catch(err=>console.log(err));};const unfollowUser=userid=>{fetch(\"/unfollow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userid})}).then(res=>res.json()).then(data=>{console.log(data);setFollowing(false);// Update state to indicate unfollowing\nlocalStorage.setItem(\"following\",false);// Update local storage\n}).catch(err=>console.log(err));};useEffect(()=>{fetch(\"/user/\".concat(userid),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(res=>res.json()).then(result=>{console.log(\"Results.......\");console.log(result);setUser(result.user);setPosts(result.posts);// Check if current user is following the profile user\nconst isFollowing=localStorage.getItem(\"following\")===\"true\";setFollowing(isFollowing);}).catch(err=>console.log(err));},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo,alt:\"profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",style:{padding:'10px 20px',borderRadius:'20px',border:'none',backgroundColor:following?'#C13584':'#405DE6',// Change color based on following status\ncolor:'white',cursor:'pointer',transition:'box-shadow 0.3s ease'},onClick:()=>{if(following){unfollowUser(user._id);}else{followUser(user._id);}},children:following?'Following':'Follow'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:'flex',justifyContent:'space-around'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",margin:\"auto\",opacity:\"0.8\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(pic=>/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsx(\"img\",{src:pic.photo,alt:\"post\"})},pic._id))})]});}","map":{"version":3,"names":["React","useEffect","useState","profile","useNavigate","Postdetails","useParams","jsx","_jsx","jsxs","_jsxs","UserProfile","data","setData","userid","user","setUser","posts","setPosts","following","setFollowing","navigate","notifyB","message","alert","followUser","fetch","method","headers","localStorage","getItem","body","JSON","stringify","followId","then","res","json","console","log","setItem","catch","err","unfollowUser","concat","result","isFollowing","className","children","src","Photo","alt","style","display","alignItems","name","padding","borderRadius","border","backgroundColor","color","cursor","transition","onClick","_id","justifyContent","length","followers","width","margin","opacity","map","pic","photo"],"sources":["C:/Users/Administrator/Desktop/ha/backend/frontend/src/Screens/UserProfile.js"],"sourcesContent":["\r\nimport React, { useEffect, useState } from 'react';\r\nimport profile from '../img/profile.jpg';\r\nimport \"../css/Profile.css\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Postdetails from './Postdetails';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nexport default function UserProfile() {\r\n  const [data, setData] = useState([]);\r\n  const { userid } = useParams();\r\n  const [user, setUser] = useState(\"\");\r\n  const [posts, setPosts] = useState([]);\r\n  const [following, setFollowing] = useState(false); // State to track if user is following\r\n  const navigate = useNavigate();\r\n\r\n  const notifyB = (message) => alert(message);\r\n\r\n  const followUser = (userid) => {\r\n    fetch(`/follow`, {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        followId: userid,\r\n      })\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        setFollowing(true); // Update state to indicate following\r\n        localStorage.setItem(\"following\", true); // Update local storage\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const unfollowUser = (userid) => {\r\n    fetch(`/unfollow`, {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        followId: userid,\r\n      })\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        setFollowing(false); // Update state to indicate unfollowing\r\n        localStorage.setItem(\"following\", false); // Update local storage\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(`/user/${userid}`, {\r\n      headers: {\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then((result) => {\r\n        console.log(\"Results.......\")\r\n        console.log(result);\r\n        setUser(result.user);\r\n        setPosts(result.posts);\r\n        // Check if current user is following the profile user\r\n        const isFollowing = localStorage.getItem(\"following\") === \"true\";\r\n        setFollowing(isFollowing);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <div className=\"profile-frame\">\r\n        <div className=\"profile-pic\">\r\n          <img src={user.Photo} alt=\"profile\" />\r\n        </div>\r\n        <div className=\"profile-data\">\r\n          <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n            <h1>{user.name}</h1>\r\n            <button className='followBtn' style={{\r\n              padding: '10px 20px',\r\n              borderRadius: '20px',\r\n              border: 'none',\r\n              backgroundColor: following ? '#C13584' : '#405DE6', // Change color based on following status\r\n              color: 'white',\r\n              cursor: 'pointer',\r\n              transition: 'box-shadow 0.3s ease',\r\n            }} onClick={() => {\r\n              if (following) {\r\n                unfollowUser(user._id);\r\n              } else {\r\n                followUser(user._id);\r\n              }\r\n            }}>{following ? 'Following' : 'Follow'}</button>\r\n          </div>\r\n          <div className=\"profile-info\" style={{ display: 'flex', justifyContent: 'space-around' }}>\r\n            <p>{posts.length} posts</p>\r\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\r\n            <p> {user.following ? user.following.length : \"0\"} following</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr style={{ width: \"90%\", margin: \"auto\", opacity: \"0.8\" }} />\r\n      <div className=\"gallery\">\r\n        {posts.map((pic) => (\r\n          <div key={pic._id} className=\"post\">\r\n            <img\r\n              src={pic.photo}\r\n              alt=\"post\"\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,MAAO,oBAAoB,CAC3B,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,OAASC,SAAS,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7C,cAAe,SAAS,CAAAC,WAAWA,CAAA,CAAG,CACpC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAEY,MAAO,CAAC,CAAGR,SAAS,CAAC,CAAC,CAC9B,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACiB,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAAE;AACnD,KAAM,CAAAmB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAkB,OAAO,CAAIC,OAAO,EAAKC,KAAK,CAACD,OAAO,CAAC,CAE3C,KAAM,CAAAE,UAAU,CAAIX,MAAM,EAAK,CAC7BY,KAAK,WAAY,CACfC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CACzD,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,QAAQ,CAAEpB,MACZ,CAAC,CACH,CAAC,CAAC,CACCqB,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEvB,IAAI,EAAK,CACd0B,OAAO,CAACC,GAAG,CAAC3B,IAAI,CAAC,CACjBQ,YAAY,CAAC,IAAI,CAAC,CAAE;AACpBS,YAAY,CAACW,OAAO,CAAC,WAAW,CAAE,IAAI,CAAC,CAAE;AAC3C,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAKJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC,CAAC,CACrC,CAAC,CAED,KAAM,CAAAC,YAAY,CAAI7B,MAAM,EAAK,CAC/BY,KAAK,aAAc,CACjBC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CACzD,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,QAAQ,CAAEpB,MACZ,CAAC,CACH,CAAC,CAAC,CACCqB,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEvB,IAAI,EAAK,CACd0B,OAAO,CAACC,GAAG,CAAC3B,IAAI,CAAC,CACjBQ,YAAY,CAAC,KAAK,CAAC,CAAE;AACrBS,YAAY,CAACW,OAAO,CAAC,WAAW,CAAE,KAAK,CAAC,CAAE;AAC5C,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAKJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC,CAAC,CACrC,CAAC,CAEDzC,SAAS,CAAC,IAAM,CACdyB,KAAK,UAAAkB,MAAA,CAAU9B,MAAM,EAAI,CACvBc,OAAO,CAAE,CACP,eAAe,CAAE,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CACzD,CACF,CAAC,CAAC,CACCK,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAAEU,MAAM,EAAK,CAChBP,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAC7BD,OAAO,CAACC,GAAG,CAACM,MAAM,CAAC,CACnB7B,OAAO,CAAC6B,MAAM,CAAC9B,IAAI,CAAC,CACpBG,QAAQ,CAAC2B,MAAM,CAAC5B,KAAK,CAAC,CACtB;AACA,KAAM,CAAA6B,WAAW,CAAGjB,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,GAAK,MAAM,CAChEV,YAAY,CAAC0B,WAAW,CAAC,CAC3B,CAAC,CAAC,CACDL,KAAK,CAACC,GAAG,EAAIJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEhC,KAAA,QAAKqC,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBtC,KAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxC,IAAA,QAAKuC,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BxC,IAAA,QAAKyC,GAAG,CAAElC,IAAI,CAACmC,KAAM,CAACC,GAAG,CAAC,SAAS,CAAE,CAAC,CACnC,CAAC,cACNzC,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BtC,KAAA,QAAK0C,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAN,QAAA,eACpDxC,IAAA,OAAAwC,QAAA,CAAKjC,IAAI,CAACwC,IAAI,CAAK,CAAC,cACpB/C,IAAA,WAAQuC,SAAS,CAAC,WAAW,CAACK,KAAK,CAAE,CACnCI,OAAO,CAAE,WAAW,CACpBC,YAAY,CAAE,MAAM,CACpBC,MAAM,CAAE,MAAM,CACdC,eAAe,CAAExC,SAAS,CAAG,SAAS,CAAG,SAAS,CAAE;AACpDyC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,SAAS,CACjBC,UAAU,CAAE,sBACd,CAAE,CAACC,OAAO,CAAEA,CAAA,GAAM,CAChB,GAAI5C,SAAS,CAAE,CACbwB,YAAY,CAAC5B,IAAI,CAACiD,GAAG,CAAC,CACxB,CAAC,IAAM,CACLvC,UAAU,CAACV,IAAI,CAACiD,GAAG,CAAC,CACtB,CACF,CAAE,CAAAhB,QAAA,CAAE7B,SAAS,CAAG,WAAW,CAAG,QAAQ,CAAS,CAAC,EAC7C,CAAC,cACNT,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAACK,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEY,cAAc,CAAE,cAAe,CAAE,CAAAjB,QAAA,eACvFtC,KAAA,MAAAsC,QAAA,EAAI/B,KAAK,CAACiD,MAAM,CAAC,QAAM,EAAG,CAAC,cAC3BxD,KAAA,MAAAsC,QAAA,EAAIjC,IAAI,CAACoD,SAAS,CAAGpD,IAAI,CAACoD,SAAS,CAACD,MAAM,CAAG,GAAG,CAAC,YAAU,EAAG,CAAC,cAC/DxD,KAAA,MAAAsC,QAAA,EAAG,GAAC,CAACjC,IAAI,CAACI,SAAS,CAAGJ,IAAI,CAACI,SAAS,CAAC+C,MAAM,CAAG,GAAG,CAAC,YAAU,EAAG,CAAC,EAC7D,CAAC,EACH,CAAC,EACH,CAAC,cACN1D,IAAA,OAAI4C,KAAK,CAAE,CAAEgB,KAAK,CAAE,KAAK,CAAEC,MAAM,CAAE,MAAM,CAAEC,OAAO,CAAE,KAAM,CAAE,CAAE,CAAC,cAC/D9D,IAAA,QAAKuC,SAAS,CAAC,SAAS,CAAAC,QAAA,CACrB/B,KAAK,CAACsD,GAAG,CAAEC,GAAG,eACbhE,IAAA,QAAmBuC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACjCxC,IAAA,QACEyC,GAAG,CAAEuB,GAAG,CAACC,KAAM,CACftB,GAAG,CAAC,MAAM,CACX,CAAC,EAJMqB,GAAG,CAACR,GAKT,CACN,CAAC,CACC,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}